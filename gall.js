var collection = [
    {
        "title": "Purple Magnolia",
        "url": "IMG_5466.jpg",
        "framed": false,
        "surface": "paper",
        "gallery-wrap": false,
        "size": "6x6",
        "medium": "acrylic"
    },
    {
        "title": "Cosmos",
        "url": "IMG_5500.jpg",
        "framed": false,
        "surface": "wood",
        "gallery-wrap": false,
        "size": "6x6",
        "medium": "acrylic"
    },
    {
        "title": "Lotus",
        "url": "IMG_2050.jpg",
        "framed": false,
        "surface": "wood",
        "gallery-wrap": false,
        "size": "8x8",
        "medium": "acrylic"
    },
    {
        "title": "Dahlia",
        "url": "IMG_2070.jpg",
        "framed": false,
        "surface": "wood",
        "gallery-wrap": false,
        "size": "8x8",
        "medium": "acrylic"
    },
    {
        "title": "Fuchsia",
        "url": "IMG_2080.jpg",
        "framed": false,
        "surface": "canvas",
        "gallery-wrap": false,
        "size": "12x12",
        "medium": "acrylic"
    },
    {
        "title": "Snow Maple",
        "url": "IMG_2063.jpg",
        "framed": false,
        "surface": "canvas",
        "gallery-wrap": false,
        "size": "12x12",
        "medium": "acrylic"
    },
    {
        "title": "Driveway",
        "url": "IMG_2064.jpg",
        "framed": false,
        "surface": "canvas",
        "gallery-wrap": false,
        "size": "12x12",
        "medium": "acrylic"
    },
    {
        "title": "Neighbor Trees",
        "url": "IMG_2067.jpg",
        "framed": false,
        "surface": "canvas",
        "gallery-wrap": false,
        "size": "12x12",
        "medium": "acrylic"
    },
    {
        "title": "Glowing in Winter",
        "url": "IMG_5589.jpg",
        "framed": false,
        "surface": "canvas",
        "gallery-wrap": false,
        "size": "12x12",
        "medium": "acrylic"
    },
    {
        "title": "Snow-covered Bush",
        "url": "IMG_7963.jpg",
        "framed": false,
        "surface": "canvas",
        "gallery-wrap": false,
        "size": "12x12",
        "medium": "acrylic"
    },
    {
        "title": "Thomas Meeting",
        "url": "IMG_7965.jpg",
        "framed": false,
        "surface": "canvas",
        "gallery-wrap": false,
        "size": "12x12",
        "medium": "acrylic"
    },
    {
        "title": "Frog and Thingies",
        "url": "IMG_7016.jpg",
        "framed": false,
        "surface": "canvas",
        "gallery-wrap": false,
        "size": "16x20",
        "medium": "acrylic"
    },
    {
        "title": "Conch and Thingies",
        "url": "IMG_2046.jpg",
        "framed": false,
        "surface": "canvas",
        "gallery-wrap": false,
        "size": "16x20",
        "medium": "acrylic"
    },
    {
        "title": "Reflecting Rhine",
        "url": "IMG_7964.jpg",
        "framed": false,
        "surface": "canvas",
        "gallery-wrap": true,
        "size": "6x6",
        "medium": "acrylic"
    },
    {
        "title": "Barn at Mill Grove",
        "url": "IMG_2041.jpg",
        "framed": false,
        "surface": "canvas",
        "gallery-wrap": true,
        "size": "16x20",
        "medium": "acrylic"
    },
    {
        "title": "Swallowtail",
        "url": "IMG_5441.jpg",
        "framed": false,
        "surface": "paper",
        "gallery-wrap": false,
        "size": "6x6",
        "medium": "acrylic"
    },
    {
        "title": "Morning Glory",
        "url": "IMG_5444.jpg",
        "framed": false,
        "surface": "paper",
        "gallery-wrap": false,
        "size": "6x6",
        "medium": "acrylic"
    },
    {
        "title": "Lily",
        "url": "IMG_5462.jpg",
        "framed": false,
        "surface": "paper",
        "gallery-wrap": false,
        "size": "6x6",
        "medium": "acrylic"
    },
    {
        "title": "Sunset",
        "url": "IMG_5479.jpg",
        "framed": false,
        "surface": "paper",
        "gallery-wrap": false,
        "size": "6x6",
        "medium": "acrylic"
    },
    {
        "title": "Mandevilla",
        "url": "IMG_5562.jpg",
        "framed": false,
        "surface": "wood",
        "gallery-wrap": false,
        "size": "6x6",
        "medium": "acrylic"
    },
    {
        "title": "Weed",
        "url": "IMG_5575.jpg",
        "framed": false,
        "surface": "canvas",
        "gallery-wrap": false,
        "size": "5x7",
        "medium": "acrylic"
    },
    {
        "title": "Purple Cover",
        "url": "IMG_5582.jpg",
        "framed": false,
        "surface": "canvas",
        "gallery-wrap": false,
        "size": "5x7",
        "medium": "acrylic"
    },
    {
        "title": "Dragonfly",
        "url": "IMG_1997.jpg",
        "framed": false,
        "surface": "paper",
        "gallery-wrap": false,
        "size": "6x6",
        "medium": "watercolor"
    },
    {
        "title": "Rose Bunch",
        "url": "IMG_2048.jpg",
        "framed": true,
        "surface": "canvas",
        "gallery-wrap": false,
        "size": "8x10",
        "medium": "acrylic"
    },
    {
        "title": "Snow-covered Branches",
        "url": "IMG_7966.jpg",
        "framed": true,
        "surface": "wood",
        "gallery-wrap": false,
        "size": "6x6",
        "medium": "acrylic"
    },
    {
        "title": "Peeking Through",
        "url": "IMG_2058.jpg",
        "framed": true,
        "surface": "paper",
        "gallery-wrap": false,
        "size": "6x6",
        "medium": "acrylic"
    },
    {
        "title": "Seagull",
        "url": "IMG_2060.jpg",
        "framed": true,
        "surface": "wood",
        "gallery-wrap": false,
        "size": "6x6",
        "medium": "acrylic"
    },
    {
        "title": "Red Bush",
        "url": "IMG_2015.jpg",
        "framed": true,
        "surface": "wood",
        "gallery-wrap": false,
        "size": "8x10",
        "medium": "acrylic"
    },
    {
        "title": "Water Drip",
        "url": "IMG_2016.jpg",
        "framed": true,
        "surface": "wood",
        "gallery-wrap": false,
        "size": "9x12",
        "medium": "acrylic"
    },
    {
        "title": "Yellow Leaf Maple",
        "url": "IMG_2018.jpg",
        "framed": true,
        "surface": "wood",
        "gallery-wrap": false,
        "size": "8x10",
        "medium": "acrylic"
    },
    {
        "title": "Wilmington Waterfront",
        "url": "IMG_2025.jpg",
        "framed": true,
        "surface": "wood",
        "gallery-wrap": false,
        "size": "9x12",
        "medium": "acrylic"
    },
    {
        "title": "Creek",
        "url": "IMG_2028.jpg",
        "framed": true,
        "surface": "wood",
        "gallery-wrap": false,
        "size": "9x12",
        "medium": "acrylic"
    },
    {
        "title": "Sunlit Woods",
        "url": "IMG_8126.jpg",
        "framed": true,
        "surface": "wood",
        "gallery-wrap": false,
        "size": "11x14",
        "medium": "acrylic"
    },
    {
        "title": "Marshall Square Park",
        "url": "IMG_1992.jpg",
        "framed": true,
        "surface": "wood",
        "gallery-wrap": false,
        "size": "11x14",
        "medium": "acrylic"
    },
    {
        "title": "Strouds Preserve",
        "url": "IMG_2005.jpg",
        "framed": true,
        "surface": "wood",
        "gallery-wrap": false,
        "size": "11x14",
        "medium": "acrylic"
    },
    {
        "title": "Sergeant Cherry",
        "url": "IMG_2010.jpg",
        "framed": true,
        "surface": "wood",
        "gallery-wrap": false,
        "size": "11x14",
        "medium": "acrylic"
    },
    {
        "title": "Silo",
        "url": "IMG_2012.jpg",
        "framed": true,
        "surface": "wood",
        "gallery-wrap": false,
        "size": "9x12",
        "medium": "acrylic"
    },
    {
        "title": "Hay Bales",
        "url": "IMG_2032.jpg",
        "framed": true,
        "surface": "wood",
        "gallery-wrap": false,
        "size": "12x16",
        "medium": "acrylic"
    },
    {
        "title": "Fall Road",
        "url": "IMG_2033.jpg",
        "framed": true,
        "surface": "wood",
        "gallery-wrap": false,
        "size": "12x16",
        "medium": "acrylic"
    },
    {
        "title": "Cabbage",
        "url": "IMG_2037.jpg",
        "framed": true,
        "surface": "wood",
        "gallery-wrap": false,
        "size": "11x14",
        "medium": "acrylic"
    },
    {
        "title": "Yellow-Green Leaves",
        "url": "IMG_2040.jpg",
        "framed": true,
        "surface": "wood",
        "gallery-wrap": false,
        "size": "11x14",
        "medium": "acrylic"
    },
    {
        "title": "Mount Cuba Center",
        "url": "IMG_1983.jpg",
        "framed": true,
        "surface": "canvas",
        "gallery-wrap": false,
        "size": "11x14",
        "medium": "acrylic"
    },
    {
        "title": "Tulip Vase",
        "url": "IMG_2044.jpg",
        "framed": true,
        "surface": "wood",
        "gallery-wrap": false,
        "size": "11x14",
        "medium": "acrylic"
    },/*
    {
        "title": "Dog",
        "url": "IMG_7967.jpg",
        "framed": false,
        "surface": "paper",
        "gallery-wrap": false,
        "size": "5x7",
        "medium": "acrylic"
    },*/
    {
        "title": "Boxcar",
        "url": "IMG_1987.jpg",
        "framed": true,
        "surface": "wood",
        "gallery-wrap": false,
        "size": "11x14",
        "medium": "acrylic"
    },
    {
        "title": "Meadows",
        "url": "IMG_1989.jpg",
        "framed": true,
        "surface": "canvas",
        "gallery-wrap": false,
        "size": "11x14",
        "medium": "acrylic"
    },
    {
        "title": "Winter Woods",
        "url": "IMG_1990.jpg",
        "framed": true,
        "surface": "canvas",
        "gallery-wrap": false,
        "size": "9x12",
        "medium": "acrylic"
    },
    {
        "title": "Forsythia",
        "url": "IMG_1996.jpg",
        "framed": true,
        "surface": "canvas",
        "gallery-wrap": false,
        "size": "11x14",
        "medium": "acrylic"
    },
    {
        "title": "Early Spring",
        "url": "IMG_1999.jpg",
        "framed": true,
        "surface": "wood",
        "gallery-wrap": false,
        "size": "9x12",
        "medium": "acrylic"
    },
    {
        "title": "Valley Forge Park",
        "url": "IMG_2007.jpg",
        "framed": true,
        "surface": "wood",
        "gallery-wrap": false,
        "size": "8x10",
        "medium": "acrylic"
    },
    {
        "title": "Zen Garden",
        "url": "IMG_2021.jpg",
        "framed": true,
        "surface": "wood",
        "gallery-wrap": false,
        "size": "11x14",
        "medium": "acrylic"
    },
    {
        "title": "Dogwood",
        "url": "IMG_2029.jpg",
        "framed": true,
        "surface": "canvas",
        "gallery-wrap": false,
        "size": "11x14",
        "medium": "acrylic"
    },
    {
        "title": "Magnolia",
        "url": "IMG_2035.jpg",
        "framed": true,
        "surface": "canvas",
        "gallery-wrap": false,
        "size": "8x10",
        "medium": "acrylic"
    },
    {
        "title": "Woods",
        "url": "IMG_2043.jpg",
        "framed": true,
        "surface": "paper",
        "gallery-wrap": false,
        "size": "8.5x11.5",
        "medium": "watercolor"
    },
    {
        "title": "Everheart",
        "url": "IMG_2072.jpg",
        "framed": false,
        "surface": "canvas",
        "gallery-wrap": false,
        "size": "8x10",
        "medium": "acrylic"
    },
    {
        "title": "Garden Chairs",
        "url": "IMG_2074.jpg",
        "framed": false,
        "surface": "canvas",
        "gallery-wrap": false,
        "size": "11x14",
        "medium": "acrylic"
    },
]

var prices = { /* framed, size, then gallery-wrap */
    true: {
        "6x6": {
            true: 50,
            false: 50
        },
        "11x14": {
            true: 160,
            false: 160
        },
        "9x12": {
            true: 115,
            false: 115
        },
        "8x10": {
            true: 85,
            false: 85
        },
        "16x20": {
            true: 320,
            false: 320
        },
        "18x24": {
            true: 430,
            false: 430
        },
        "12x16": {
            true: 200,
            false: 200
        },
        "8.5x11.5": {
            true: 50,
            false: 50
        }
    },
    false: {
        "12x12": {
            true: 110,
            false: 110
        },
        "8x8": {
            true: 100,
            false: 100
        },
        "6x6": {
            true: 35,
            false: 20
        },
        "5x7": {
            true: 20,
            false: 20
        },
        "8x10": {
            true: 50,
            false: 50
        },
        "16x20": {
            true: 250,
            false: 250
        },
        "11x14": {
            true: 50,
            false: 50
        }
    }
}

/*add any new painting size, and the below js will add a new category. */

var gray = "rgb(71, 65, 65)";
var white2 = "rgb(238, 213, 199)";
var white = "white";
var black = "black";

var frameDisplayId = "both";
var frameArr = ['framed', 'unframed'];

var sizeArr = [];
var sizeDisplayArr = [];

var surfaceArr = [];
var surfaceDisplayArr = [];

var paintingsByCt = {};
var paintingsByParent = {};

var pageSize = 10;

function drawOnLoad() {
    var paintingCt = 0;
    collection.forEach(function(artwork) {
        paintingCt++;
        var artIMG = document.createElement("img");
        artIMG.src = "images/" + artwork["url"];
        artIMG.classList.add("artwork");
        if (artwork["framed"]) {
            artIMG.classList.add("framed");
        } else {
            artIMG.classList.add("unframed");
        }
        artIMG.classList.add(artwork["size"]);
        artIMG.classList.add(artwork["surface"]);
        artPrice = "$" + String(prices[artwork["framed"]][artwork["size"]][artwork["gallery-wrap"]]);
        artIMG.setAttribute("onmousedown", "imgClick('" + artwork["title"] + "', '" + artwork["url"] + "', " + artwork["framed"] + ", '" + artwork["surface"] + "', " + artwork["gallery-wrap"] + ", '" + artwork["size"] + "', '" + artwork["medium"] + "', '" + artPrice + "')");
        artIMG.id = String(paintingCt);

        if (paintingCt%pageSize == 1) {
            var parentDiv = document.createElement("div");
            parentDiv.classList.add("imgDiv");
            var divID = (paintingCt - 1)/pageSize + 1;
            if (divID != 1) {
                parentDiv.style.display = "none";
            }
            parentDiv.id = "imageDiv" + String(divID);
            document.getElementById("content").appendChild(parentDiv);

            paintingsByParent[divID] = [];

            var pageSelector = document.createElement("div");
            pageSelector.id = "pageSelector" + String(divID);
            var pageSelectorTxt = document.createTextNode(String(divID));
            pageSelector.classList.add("pageSelector");
            pageSelector.setAttribute("onmousedown", "changePage('" + String(divID) + "')");
            pageSelector.appendChild(pageSelectorTxt);
            document.getElementById("pageSelect").appendChild(pageSelector);
        }
        var imgParentID = String(Math.floor((paintingCt-1)/pageSize) + 1);
        paintingsByCt[paintingCt] = artIMG;
        paintingsByParent[imgParentID].push(artIMG);
        document.getElementById("imageDiv" + imgParentID).appendChild(artIMG);
    })
    sizeGenerator();
    surfaceGenerator();
}

function changePage(divID) {
    document.getElementById("imageDiv" + divID).style.display = "block";

    var nonSelecteds = document.getElementsByClassName("pageSelector");
    var nonArr = [];
    for (var i = 0; i < nonSelecteds.length; i++) {
        nonArr.push(nonSelecteds[i]);
    }
    nonArr.forEach(function(nonSelected) {
        try {
           nonSelected.style.color = black; 
        } catch (error) {
        }
    })
    document.getElementById("pageSelector" + divID).style.color = white;

    var hiddens = document.getElementsByClassName("imgDiv");
    var hiddenArr = [];
    for (var i = 0; i < hiddens.length; i++) {
        hiddenArr.push(hiddens[i]);
    }
    hiddenArr.forEach(function(hidden) {
        try {
            if (hidden.id != "imageDiv" + divID) {
                hidden.style.display = "none";
            }
        } catch (error) {
        }
    })
}

function imgClick(title, url, framed, surface, galleryWrap, size, medium, artPrice) {
    document.getElementById("popupBG").style.display = "inline";
    popupIMG = document.getElementById("popupIMG");
    popupIMG.src = "images/" + url;
    popupIMG.alt = surface + " " + size + " " + medium;

    var x = document.getElementById("popupTITLE").childNodes[0];
    document.getElementById("popupTITLE").removeChild(x);

    x = document.getElementById("popupDESC").childNodes[0];
    document.getElementById("popupDESC").removeChild(x);

    if (title != "undefined") {
        var intext = document.createTextNode(title + " |");
        document.getElementById("popupTITLE").appendChild(intext);
    } else {
        var intext = document.createTextNode("untitled |");
        document.getElementById("popupTITLE").appendChild(intext);
    }

    popupDESC = document.getElementById("popupDESC");
    descText = document.createTextNode(surface + " " + size + " " + medium);
    popupDESC.appendChild(descText);
}

function closePopup() {
    document.getElementById("popupBG").style.display = "none";
}

function redraw() {
    /* First, reset all of the drawn/removed classes */
    var drawns = document.getElementsByClassName("drawn");
    var drawns2 = [];
    for (var i = 0; i < drawns.length; i++) {
        drawns2.push(drawns[i]);
    }
    drawns2.forEach(function(drawn) {
        try {
            drawn.classList.remove("drawn");
            drawn.classList.remove("removed");
        } catch (error){
        }
    })

    var removeds = document.getElementsByClassName("removed");
    var removeds2 = [];
    for (var i = 0; i < removeds.length; i++) {
        removeds2.push(removeds[i]);
    }
    removeds2.forEach(function(removed) {
        try {
            removed.classList.remove("drawn");
            removed.classList.remove("removed");
        } catch (error){
        }
    })

    frameredraw();
    sizeredraw();
    surfaceredraw();
    /* Above functions add 'drawn' and 'removed' classes to all images. Next, the drawn ones will be drawn, and removed ones will be removed. If one has both, it will be removed. */
    
    var numDisplayed = 0;

    var drawns = document.getElementsByClassName("drawn");
    var drawns2 = [];
    for (var i = 0; i < drawns.length; i++) {
        drawns2.push(drawns[i]);
    }
    drawns2.forEach(function(drawn) {
        try {
            drawn.style.display = "inline";
            numDisplayed++;
        } catch (error){
        }
    })

    var removeds = document.getElementsByClassName("removed");
    var removeds2 = [];
    for (var i = 0; i < removeds.length; i++) {
        removeds2.push(removeds[i]);
    }
    removeds2.forEach(function(removed) {
        try {
            removed.style.display = "none";
            if (removed.classList.contains("drawn")) {
                numDisplayed--;
            }
        } catch (error){
        }
    })

    if (numDisplayed == 0) {
        document.getElementById("alertDiv").style.display = "block";
    } else {
        document.getElementById("alertDiv").style.display = "none";
    }

    siAlert = document.getElementById("sizingAlert");
    suAlert = document.getElementById("surfacingAlert");
    fAlert = document.getElementById("framingAlert");
    [siAlert, suAlert, fAlert].forEach(function(theAlert) {
        var x = theAlert.childNodes[0];
        theAlert.removeChild(x);
    })

    if (sizeDisplayArr.length == 0) {
        var siAlertTxt = document.createTextNode("Sizing (showing all):");
    } else {
        var siAlertTxt = document.createTextNode("Sizing:");
    }
    siAlert.appendChild(siAlertTxt);

    if (surfaceDisplayArr.length == 0) {
        var suAlertTxt = document.createTextNode("Surface (showing all):");
    } else {
        var suAlertTxt = document.createTextNode("Surface:");
    }
    suAlert.appendChild(suAlertTxt);

    if (frameDisplayId == "both") {
        var fAlertTxt = document.createTextNode("Framing (showing all):");
    } else {
        var fAlertTxt = document.createTextNode("Framing:");
    }
    fAlert.appendChild(fAlertTxt);

    pageReassign();
    changePage('1');
}

function pageReassign() {
    /* Puts all displayed paintings early as possible, pushes non-displayed paintings to end */
    var newPaintingCt = 0;
    var newPaintingsByCt = {};
    var newPaintingsByParent = {};
    Object.keys(paintingsByCt).forEach( function(key) {
        /* These first two if statements reorder the paintings by display */
        if (paintingsByCt[key].style.display != "none") {
            /* These are all the displayed paintings */
            newPaintingCt++;
            newPaintingsByCt[newPaintingCt] = paintingsByCt[key];
        } 
    })
    Object.keys(paintingsByCt).forEach( function(key) {
        /* These first two if statements reorder the paintings by display */
        if (paintingsByCt[key].style.display == "none") {
            newPaintingCt++;
            newPaintingsByCt[newPaintingCt] = paintingsByCt[key];
        }
    })
    
    var position = 1;
    Object.keys(paintingsByParent).forEach( function(parentID) {
        var parent = document.getElementById("imageDiv" + String(parentID))
        var anyDisplayed = false;
        newPaintingsByParent[parentID] = [];
        paintingsByParent[parentID].forEach( function(artIMG) {
            var removeID = artIMG.id;
            /*document.getElementById(removeID).remove();*/
        })
        while ((Math.floor((position - 1)/pageSize) + 1) == parentID) {
            try {
                parent.appendChild(newPaintingsByCt[position]);
                newPaintingsByCt[position].id = String(position);
                newPaintingsByParent[parentID].push(newPaintingsByCt[position]);
                if (newPaintingsByCt[position].style.display != "none") {
                    anyDisplayed = true;
                }
            } catch (error) {
            }
            position++;
        }

        if (!anyDisplayed) {
            document.getElementById("pageSelector" + String(parentID)).style.display = "none";
        } else {
            document.getElementById("pageSelector" + String(parentID)).style.display = "block";
        }
    })

    /*paintingsByCt = newPaintingsByCt; TURNS OUT THIS REORDERS PAINTINGS AND ISN'T NECESSARY! */
    paintingsByParent = newPaintingsByParent;
}

function frameChange(button, id) {
    if (id != frameDisplayId) {
        button.style.backgroundColor = gray;
        button.style.color = white;
        frameDisplayId = id;
        frameArr.forEach(function(choiceID) {
            if (choiceID != frameDisplayId) {
                document.getElementById(choiceID).style.backgroundColor = white2;
                document.getElementById(choiceID).style.color = black;
            }
        })
    } else {
        button.style.backgroundColor = white2;
        button.style.color = black;
        frameDisplayId = "both";
    }
    redraw();
}

function frameredraw() {
    if (frameDisplayId == "both") {
        var selections = document.getElementsByClassName("framed");
        var selections2  = [];
            for (var i = 0; i < selections.length; i++) {
                selections2.push(selections[i]);
            }
            selections2.forEach(function(e) {
                try {
                    e.classList.add("drawn");
                } catch (error){
                }
            })

        var selections = document.getElementsByClassName("unframed");
        var selections2  = [];
            for (var i = 0; i < selections.length; i++) {
                selections2.push(selections[i]);
            }
            selections2.forEach(function(e) {
                try {
                    e.classList.add("drawn");
                } catch (error){
                }
            })
    } else {
        var selections = document.getElementsByClassName(frameDisplayId);
        var selections2  = [];
            for (var i = 0; i < selections.length; i++) {
                selections2.push(selections[i]);
            }
            selections2.forEach(function(e) {
                try {
                    e.classList.add("drawn");
                } catch (error){
                }
            })
        frameArr.forEach(function(choiceID) {
            if (choiceID != frameDisplayId) {
                var selections = document.getElementsByClassName(choiceID);
                var selections2  = [];
                for (var i = 0; i < selections.length; i++) {
                    console.log(i);
                    selections2.push(selections[i]);
                }
                selections2.forEach(function(e) {
                    try {
                        e.classList.add("removed");
                    } catch (error){
                    }
                })
            }
        })
    }
}

function sizeGenerator() {
    collection.forEach(function(artwork) {
        if (sizeArr.indexOf(artwork["size"]) == -1) {
            sizeArr.push(artwork["size"]);
        }
    })
    sizeArr.forEach(function(sizeOption) {
        sizeButton = document.createElement("div");
        sizeButton.id = sizeOption;
        sizeButton.classList.add("sizeOption");
        sizeButton.setAttribute("onmousedown", "sizeChange(this, '" + sizeOption + "')");
        var SO = document.createTextNode(sizeOption);
        sizeButton.appendChild(SO);
        document.getElementById("sizing").appendChild(sizeButton);
    })
}

function surfaceGenerator() {
    collection.forEach(function(artwork) {
        if (surfaceArr.indexOf(artwork["surface"]) == -1) {
            surfaceArr.push(artwork["surface"]);
        }
    })
    surfaceArr.forEach(function(surfaceOption) {
        surfaceButton = document.createElement("div");
        surfaceButton.id = surfaceOption;
        surfaceButton.classList.add("surfaceOption");
        surfaceButton.setAttribute("onmousedown", "surfaceChange(this, '" + surfaceOption + "')");
        var SO = document.createTextNode(surfaceOption);
        surfaceButton.appendChild(SO);
        document.getElementById("surfacing").appendChild(surfaceButton);
    })
}

/* Sizing displays all either when none or all are selected. */
function sizeChange(button, id) {
    if ((sizeDisplayArr.length == 0) || (sizeDisplayArr.indexOf(id)) == -1) {
        button.style.backgroundColor = gray;
        button.style.color = white;
        sizeDisplayArr.push(id);
    } else {
        button.style.backgroundColor = white2;
        button.style.color = black;
        sizeDisplayArr.splice(sizeDisplayArr.indexOf(id), 1);
    }
    redraw();
}

function surfaceChange(button, id) {
    if ((surfaceDisplayArr.length == 0) || (surfaceDisplayArr.indexOf(id)) == -1) {
        button.style.backgroundColor = gray;
        button.style.color = white;
        surfaceDisplayArr.push(id);
    } else {
        button.style.backgroundColor = white2;
        button.style.color = black;
        surfaceDisplayArr.splice(surfaceDisplayArr.indexOf(id), 1);
    }
    redraw();
}

function sizeredraw() {
    sizeArr.forEach(function(anyID) {
        if ((sizeDisplayArr.indexOf(anyID) != -1) || (sizeDisplayArr.length == 0)) {
            var selections = document.getElementsByClassName(anyID);
            var selections2  = [];
            for (var i = 0; i < selections.length; i++) {
                selections2.push(selections[i]);
            }
            selections2.forEach(function(e) {
                try {
                    e.classList.add("drawn");
                } catch (error){
                }
            })
        } else {
            var selections = document.getElementsByClassName(anyID);
            var selections2  = [];
            for (var i = 0; i < selections.length; i++) {
                selections2.push(selections[i]);
            }
            selections2.forEach(function(e) {
                try {
                    e.classList.add("removed");
                } catch (error){
                }
            })
        }
    })
    /* Since any of the above can be fulfilled, let's remove the "removed"s from drawn ones 
    var drawns = document.getElementsByClassName("drawnSize");
    var drawns2 = [];
    for (var i in drawns) {
        drawns2.push(drawns[i]);
    }
    drawns2.forEach(function(drawn) {
        try {
            drawn.classList.add("drawn");
            drawn.classList.remove("drawnSize", "removed");
        } catch {
        }
    })
    */
}

function surfaceredraw() {
    surfaceArr.forEach(function(anyID) {
        if ((surfaceDisplayArr.indexOf(anyID) != -1) || (surfaceDisplayArr.length == 0)) {
            var selections = document.getElementsByClassName(anyID);
            var selections2  = [];
            for (var i = 0; i < selections.length; i++) {
                selections2.push(selections[i]);
            }
            selections2.forEach(function(e) {
                try {
                    e.classList.add("drawn");
                } catch (error){
                }
            })
        } else {
            var selections = document.getElementsByClassName(anyID);
            var selections2  = [];
            for (var i = 0; i < selections.length; i++) {
                selections2.push(selections[i]);
            }
            selections2.forEach(function(e) {
                try {
                    e.classList.add("removed");
                } catch (error){
                }
            })
        }
    })
}